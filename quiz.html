<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ë¹ˆì¹¸ í€´ì¦ˆ â€” ì°¬í¬ ì˜ì–´ ë‹¨ì–´ì¥</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; touch-action: manipulation; }
    :root {
      --primary: #5b4fcf; --primary-light: #7c71e0; --primary-bg: #eef2ff;
      --green: #10b981; --green-bg: #ecfdf5; --red: #ef4444; --red-bg: #fef2f2;
      --yellow: #f59e0b; --bg: #f1f5f9; --card: #ffffff; --text: #1e293b;
      --muted: #64748b; --border: #e2e8f0; --radius: 14px;
    }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }
    .page { padding: 16px; max-width: 860px; margin: 0 auto; }
    .screen { display: none; }
    .screen.active { display: block; }
    .screen-header { display: flex; align-items: center; gap: 10px; margin-bottom: 16px; }
    .back-btn { background: none; border: none; font-size: 22px; cursor: pointer; color: var(--muted); padding: 4px 8px; border-radius: 8px; }
    .back-btn:hover { background: var(--border); }
    .progress-wrap { flex: 1; }
    .progress-bar { height: 8px; background: var(--border); border-radius: 4px; overflow: hidden; }
    .progress-fill { height: 100%; background: var(--primary); border-radius: 4px; transition: width 0.3s; }
    .progress-text { font-size: 13px; color: var(--muted); white-space: nowrap; }

    /* QUIZ */
    .quiz-card { background: var(--card); border-radius: var(--radius); padding: 24px; border: 1px solid var(--border); box-shadow: 0 2px 12px rgba(0,0,0,0.06); margin-bottom: 16px; }
    .qc-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px; }
    .qc-word { font-size: 20px; font-weight: 800; color: var(--primary); }
    .qc-pos  { font-size: 12px; color: var(--muted); background: var(--border); padding: 2px 8px; border-radius: 10px; }
    .qc-korean { font-size: 15px; color: var(--muted); margin-top: 4px; }
    .qc-sentence { font-size: 19px; line-height: 1.7; margin-bottom: 20px; color: var(--text); }
    .blank { color: var(--primary); border-bottom: 2px solid var(--primary); padding: 0 4px; }
    .quiz-input { width: 100%; padding: 14px 16px; font-size: 18px; border: 2px solid var(--border); border-radius: 10px; outline: none; transition: border-color 0.2s; font-family: inherit; }
    .quiz-input:focus { border-color: var(--primary); }
    .quiz-input.correct { border-color: var(--green); background: var(--green-bg); }
    .quiz-input.wrong   { border-color: var(--red);   background: var(--red-bg); }
    .feedback { display: none; margin-top: 10px; padding: 10px 14px; border-radius: 8px; font-size: 14px; font-weight: 500; }
    .feedback.correct { display: block; background: var(--green-bg); color: #065f46; }
    .feedback.wrong   { display: block; background: var(--red-bg);   color: #991b1b; }
    .submit-btn { width: 100%; padding: 14px; margin-top: 12px; background: var(--primary); color: #fff; border: none; border-radius: 10px; font-size: 16px; font-weight: 700; cursor: pointer; transition: background 0.2s; }
    .submit-btn:hover { background: var(--primary-light); }

    /* RESULT */
    #screen-result .page { text-align: center; }
    .score-ring { width: 160px; height: 160px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--primary-light)); color: #fff; display: flex; flex-direction: column; align-items: center; justify-content: center; margin: 24px auto; box-shadow: 0 8px 30px rgba(91,79,207,0.3); }
    .sr-num   { font-size: 52px; font-weight: 800; line-height: 1; }
    .sr-total { font-size: 15px; opacity: 0.8; }
    .result-title { font-size: 26px; font-weight: 800; margin-bottom: 6px; }
    .result-sub   { font-size: 15px; color: var(--muted); }
    .section-label { font-size: 11px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; color: var(--muted); margin: 20px 0 8px; }
    .wrong-section { text-align: left; margin-top: 24px; }
    .wrong-item { padding: 12px 14px; border-left: 3px solid var(--red); background: var(--red-bg); margin-bottom: 8px; border-radius: 0 10px 10px 0; }
    .wi-word { font-weight: 700; color: var(--red); }
    .wi-ans  { font-size: 13px; color: var(--muted); margin-top: 3px; }
    .result-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 24px; }
    .result-btn { padding: 14px; border-radius: 10px; font-size: 15px; font-weight: 700; cursor: pointer; border: 2px solid var(--border); background: var(--card); transition: all 0.15s; }
    .result-btn:hover { border-color: var(--primary); }
    .result-btn.primary { background: var(--primary); color: #fff; border-color: var(--primary); }
    .done-action { margin-top: 12px; margin-bottom: 32px; }
    .result-btn.done-btn { width: 100%; background: #ecfdf5; border-color: #10b981; color: #065f46; }
    .result-btn.done-btn.on { background: #10b981; color: #fff; border-color: #10b981; }

    .toast { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%); background: #1e293b; color: #fff; padding: 10px 20px; border-radius: 30px; font-size: 14px; opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 999; }
    .toast.show { opacity: 1; }

    /* â”€â”€ CELEBRATION â”€â”€ */
    #celebration { display: none; position: fixed; inset: 0; z-index: 9999; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; overflow: hidden; background-size: 400% 400%; }
    #celebration.show { display: flex; }
    #celebration.tier-100 { background: linear-gradient(135deg, #ffd700, #ff4e50, #ffd700, #fc913a); animation: bgFast 0.7s ease infinite; }
    #celebration.tier-90  { background: linear-gradient(135deg, #8b5cf6, #a78bfa, #6d28d9, #7c3aed); animation: bgShift 2s ease infinite; }
    #celebration.tier-80  { background: linear-gradient(135deg, #3b82f6, #10b981, #2563eb, #059669); animation: bgShift 2.5s ease infinite; }
    #celebration.tier-low { background: linear-gradient(135deg, #f97316, #fb923c, #ea580c, #f59e0b); animation: bgShift 3s ease infinite; }
    @keyframes bgFast  { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
    @keyframes bgShift { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

    .cele-emoji-wrap { margin-bottom: 4px; }
    .cele-main-emoji { font-size: 90px; display: block; animation: emojiSpin 1s linear infinite; }
    .cele-thumbs { font-size: 80px; display: flex; gap: 8px; }
    .cele-thumbs span { display: inline-block; animation: thumbsBounce 0.35s ease-in-out infinite alternate; }
    .cele-thumbs span:nth-child(2) { animation-delay: 0.18s; }
    @keyframes emojiSpin    { from{transform:rotate(0deg)} to{transform:rotate(360deg)} }
    @keyframes thumbsBounce { from{transform:scale(1) rotate(-18deg)} to{transform:scale(1.45) rotate(18deg)} }

    .cele-msg { font-size: 40px; font-weight: 900; color: #fff; text-align: center; padding: 0 20px; text-shadow: 0 4px 24px rgba(0,0,0,0.4); margin: 14px 0 8px; }
    .tier-100 .cele-msg { font-size: 46px; animation: heartbeat 0.45s ease-in-out infinite alternate; }
    .tier-90  .cele-msg { animation: pulse 0.55s ease-in-out infinite alternate; }
    .tier-80  .cele-msg { animation: pulse 0.75s ease-in-out infinite alternate; }
    .tier-low .cele-msg { animation: pulse 1.1s ease-in-out infinite alternate; }
    @keyframes heartbeat { 0%{transform:scale(1)} 60%{transform:scale(1.18)} 100%{transform:scale(1.06)} }
    @keyframes pulse     { from{transform:scale(1)} to{transform:scale(1.09)} }

    .cele-sub { font-size: 19px; color: rgba(255,255,255,0.95); text-align: center; padding: 0 24px; line-height: 1.5; }
    .cele-tap { position: absolute; bottom: 28px; font-size: 15px; color: rgba(255,255,255,0.65); }
    .fly-emoji { position: absolute; font-size: 36px; pointer-events: none; animation: flyUp linear forwards; }
    @keyframes flyUp { 0%{transform:translateY(0) rotate(0deg) scale(1);opacity:1} 100%{transform:translateY(-110vh) rotate(720deg) scale(0.5);opacity:0} }
    .flash-overlay { position: fixed; inset: 0; background: #fff; pointer-events: none; z-index: 10000; animation: screenFlash 0.7s ease forwards; }
    @keyframes screenFlash { 0%,100%{opacity:0} 15%,45%{opacity:0.9} 30%{opacity:0.4} }
  </style>
</head>
<body>

<!-- QUIZ -->
<div id="screen-quiz" class="screen active">
  <div class="page">
    <div class="screen-header">
      <button class="back-btn" onclick="goHome()">â†</button>
      <div class="progress-wrap">
        <div class="progress-bar"><div class="progress-fill" id="quiz-pf"></div></div>
      </div>
      <div class="progress-text" id="quiz-count"></div>
    </div>
    <div class="quiz-card">
      <div class="qc-header">
        <div>
          <div class="qc-word" id="qc-word"></div>
          <div class="qc-korean" id="qc-korean"></div>
        </div>
        <div class="qc-pos" id="qc-pos"></div>
      </div>
      <div class="qc-sentence" id="qc-sentence"></div>
      <input class="quiz-input" id="quiz-input" type="text" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
      <div class="feedback" id="feedback"></div>
      <button class="submit-btn" id="submit-btn" onclick="submitAnswer()">í™•ì¸</button>
    </div>
  </div>
</div>

<!-- RESULT -->
<div id="screen-result" class="screen">
  <div class="page">
    <div class="score-ring">
      <div class="sr-num"   id="sr-num"></div>
      <div class="sr-total" id="sr-total"></div>
    </div>
    <div class="result-title" id="result-title"></div>
    <div class="result-sub"   id="result-sub"></div>
    <div class="wrong-section" id="wrong-section"></div>
    <div class="result-actions">
      <button class="result-btn"         onclick="retryQuiz()">ğŸ”„ ë‹¤ì‹œ í’€ê¸°</button>
      <button class="result-btn primary" onclick="goHome()">ğŸ  ì²˜ìŒìœ¼ë¡œ</button>
    </div>
    <div class="done-action">
      <button class="result-btn done-btn" id="btn-done" onclick="toggleDone()">ì´ ë‹¨ì› ì™„ë£Œ í‘œì‹œ</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<!-- CELEBRATION -->
<div id="celebration" onclick="hideCelebration()">
  <div class="cele-emoji-wrap" id="cele-emoji-wrap"></div>
  <div class="cele-msg" id="cele-msg"></div>
  <div class="cele-sub" id="cele-sub"></div>
  <div class="cele-tap">ğŸ‘† íƒ­í•´ì„œ ë‹«ê¸°</div>
</div>

<script>
const params   = new URLSearchParams(location.search);
const courseId = params.get('c');
const typeId   = params.get('t');
const unitId   = params.get('u');

let words        = [];
let quizWords    = [];
let quizIdx      = 0;
let quizScore    = 0;
let quizAnswered = false;
let wrongList    = [];

function starKey() { return `star_${courseId}_${typeId}_${unitId}`; }
function saveStarWords(wrongEnglish) {
  if (!wrongEnglish.length) return;
  try {
    const existing = JSON.parse(localStorage.getItem(starKey()) || '[]');
    const merged   = [...new Set([...existing, ...wrongEnglish])];
    localStorage.setItem(starKey(), JSON.stringify(merged));
  } catch {}
}

(async () => {
  if (!courseId || !typeId || !unitId) { location.href = 'index.html'; return; }
  try {
    const r = await fetch(`data/${courseId}/${typeId}/${unitId}.json`);
    const data = await r.json();
    words = data.words;
    startQuiz();
  } catch(e) {
    showToast('âš ï¸ íŒŒì¼ ë¡œë”© ì‹¤íŒ¨');
  }
})();

function startQuiz() {
  quizIdx = 0; quizScore = 0; quizAnswered = false; wrongList = [];
  quizWords = shuffle([...words]);
  showScreen('screen-quiz');
  renderQuizCard();
}

function renderQuizCard() {
  const w = quizWords[quizIdx];
  quizAnswered = false;
  document.getElementById('qc-word').textContent   = w.english;
  document.getElementById('qc-korean').textContent = w.korean;
  document.getElementById('qc-pos').textContent    = w.pos || '';
  document.getElementById('qc-pos').style.display  = w.pos ? '' : 'none';
  document.getElementById('qc-sentence').innerHTML = w.sentence.replace('___', '<span class="blank">___</span>');
  const inp = document.getElementById('quiz-input');
  inp.value = ''; inp.className = 'quiz-input'; inp.disabled = false; inp.focus();
  const fb = document.getElementById('feedback');
  fb.className = 'feedback'; fb.textContent = '';
  document.getElementById('submit-btn').textContent = 'í™•ì¸';
  const pct = (quizIdx / quizWords.length) * 100;
  document.getElementById('quiz-pf').style.width = pct + '%';
  document.getElementById('quiz-count').textContent = `${quizIdx + 1} / ${quizWords.length}`;
}

function submitAnswer() {
  if (quizAnswered) {
    quizIdx++;
    if (quizIdx >= quizWords.length) showResult();
    else renderQuizCard();
    return;
  }
  const w = quizWords[quizIdx];
  const inp = document.getElementById('quiz-input');
  const user = inp.value.trim();
  const correct = w.answer;
  const ok = user.toLowerCase() === correct.toLowerCase();
  quizAnswered = true; inp.disabled = true;
  const fb = document.getElementById('feedback');
  if (ok) {
    quizScore++;
    inp.classList.add('correct');
    fb.className = 'feedback correct'; fb.textContent = 'âœ… ì •ë‹µ!';
  } else {
    inp.classList.add('wrong');
    fb.className = 'feedback wrong'; fb.textContent = `âŒ í‹€ë ¸ìŠµë‹ˆë‹¤.  ì •ë‹µ: "${correct}"`;
    wrongList.push({ w, user });
    saveStarWords([w.english]); // í‹€ë¦¬ëŠ” ì¦‰ì‹œ ì €ì¥
  }
  const isLast = quizIdx >= quizWords.length - 1;
  document.getElementById('submit-btn').textContent = isLast ? 'ê²°ê³¼ ë³´ê¸° ğŸ“Š' : 'ë‹¤ìŒ ë¬¸ì œ â–¶';
}

document.getElementById('quiz-input').addEventListener('keydown', e => {
  if (e.key === 'Enter') submitAnswer();
});

function showResult() {
  showScreen('screen-result');
  loadDoneState();
  const total = quizWords.length;
  const pct   = Math.round(quizScore / total * 100);
  const isPerfect = wrongList.length === 0;
  document.getElementById('sr-num').textContent   = quizScore;
  document.getElementById('sr-total').textContent = `/ ${total}`;
  let title, sub;
  if (isPerfect)      { title = 'ğŸ‘ğŸ‘ ì™„ë²½í•´ìš”!!';   sub = 'í•œ ë²ˆë„ ì•ˆ í‹€ë¦° 100ì !! ìŒë”°ë´‰!'; }
  else if (pct >= 90) { title = 'ğŸŒŸ ëŒ€ë‹¨í•´ìš”!';      sub = `${pct}ì  â€” ì¡°ê¸ˆë§Œ ë” í•˜ë©´ ì™„ë²½!`; }
  else if (pct >= 80) { title = 'ğŸ‘ ì˜í–ˆì–´ìš”!';      sub = `${pct}ì  â€” í‹€ë¦° ë‹¨ì–´ ë³µìŠµí•´ë´ìš”!`; }
  else if (pct >= 60) { title = 'ğŸ’ª ë…¸ë ¥í•´ìš”!';      sub = `${pct}ì  â€” í¬ê¸°í•˜ì§€ ë§ˆ! í•  ìˆ˜ ìˆì–´!`; }
  else                { title = 'ğŸ“– ë‹¤ì‹œ ê³µë¶€í•´ìš”!';  sub = `${pct}ì  â€” í”Œë˜ì‹œì¹´ë“œë¶€í„° ë‹¤ì‹œ! íŒŒì´íŒ…!`; }
  document.getElementById('result-title').textContent = title;
  document.getElementById('result-sub').textContent   = sub;
  const sec = document.getElementById('wrong-section');
  sec.innerHTML = '';
  if (wrongList.length) {
    sec.innerHTML = '<div class="section-label" style="margin-top:0">í‹€ë¦° ë‹¨ì–´</div>';
    wrongList.forEach(({ w, user }) => {
      const d = document.createElement('div');
      d.className = 'wrong-item';
      d.innerHTML = `<div class="wi-word">${w.english} â€” ${w.korean}</div><div class="wi-ans">ë‚´ ë‹µ: "${user}"ã€€â†’ã€€ì •ë‹µ: "${w.answer}"</div>`;
      sec.appendChild(d);
    });
  }
  // í‹€ë¦° ë‹¨ì–´ â˜…â˜…â˜… ì €ì¥ (study.htmlì—ì„œ í‘œì‹œ)
  saveStarWords(wrongList.map(item => item.w.english));
  setTimeout(() => triggerCelebration(pct, isPerfect), 400);
}

function retryQuiz() { hideCelebration(); startQuiz(); }
function goHome() { hideCelebration(); location.href = 'index.html'; }

// â”€â”€ CELEBRATION â”€â”€
const CELE_TIERS = {
  100: {
    cls: 'tier-100',
    emoji: 'thumbs',
    msg: 'ğŸ‘ğŸ‘ ìŒë”°ë´‰!! ì™„ì „ ë¿…~ ğŸ’«',
    sub: 'í•œ ë²ˆë„ ì•ˆ í‹€ë¦° ì™„ë²½í•œ 100ì !! ìµœê°•ì´ì•¼!! ğŸ†',
    particles: ['ğŸ‘','ğŸ’¯','ğŸŒŸ','âœ¨','ğŸ‰','ğŸ†','ğŸ’«','â­','ğŸŠ','ğŸ”¥','ğŸ˜','ğŸ¯'],
    count: 65, interval: 75,
  },
  90: {
    cls: 'tier-90',
    emoji: 'ğŸ†',
    msg: 'ğŸŒŸ ëŒ€ë‹¨í•´!! ê±°ì˜ ì™„ë²½í•´!',
    sub: '90ì ëŒ€! ì¡°ê¸ˆë§Œ ë” í•˜ë©´ 100ì ì´ì•¼! â­â­â­',
    particles: ['ğŸ†','â­','âœ¨','ğŸŒŸ','ğŸ‰','ğŸ‘','ğŸ˜„','ğŸŠ'],
    count: 38, interval: 110,
  },
  80: {
    cls: 'tier-80',
    emoji: 'ğŸ‘',
    msg: 'ğŸ˜Š ì˜í–ˆì–´! ì¢‹ì€ ì ìˆ˜ì•¼!',
    sub: '80ì ëŒ€! í‹€ë¦° ë‹¨ì–´ ë³µìŠµí•˜ë©´ ì™„ë²½í•´! ğŸ’ª',
    particles: ['ğŸ‘','ğŸ˜Š','ğŸ’ª','â­','ğŸˆ','âœ¨'],
    count: 22, interval: 160,
  },
  low: {
    cls: 'tier-low',
    emoji: 'ğŸ’ª',
    msg: 'ğŸ’ª í¬ê¸°í•˜ì§€ ë§ˆ! í•  ìˆ˜ ìˆì–´!!',
    sub: 'ê³„ì† ì—°ìŠµí•˜ë©´ ê¸ˆë°© ëŠ˜ì–´! íŒŒì´íŒ…!! ğŸ”¥',
    particles: ['ğŸ’ª','ğŸ”¥','ğŸ˜¤','â­','âœ¨','ğŸŒŸ'],
    count: 16, interval: 200,
  },
};

function getTier(pct, isPerfect) {
  if (isPerfect && pct === 100) return 100;
  if (pct >= 90) return 90;
  if (pct >= 80) return 80;
  return 'low';
}

function triggerCelebration(pct, isPerfect) {
  const key  = getTier(pct, isPerfect);
  const data = CELE_TIERS[key];
  const cel  = document.getElementById('celebration');

  // ê¸°ì¡´ íŒŒí‹°í´ ì œê±°
  cel.querySelectorAll('.fly-emoji').forEach(e => e.remove());
  cel.className = 'show ' + data.cls;

  // ì´ëª¨ì§€
  const wrap = document.getElementById('cele-emoji-wrap');
  if (data.emoji === 'thumbs') {
    wrap.innerHTML = '<div class="cele-thumbs"><span>ğŸ‘</span><span>ğŸ‘</span></div>';
  } else {
    wrap.innerHTML = `<span class="cele-main-emoji">${data.emoji}</span>`;
  }
  document.getElementById('cele-msg').textContent = data.msg;
  document.getElementById('cele-sub').textContent = data.sub;

  // 100ì  í™”ë©´ í”Œë˜ì‹œ
  if (key === 100) {
    const fl = document.createElement('div');
    fl.className = 'flash-overlay';
    document.body.appendChild(fl);
    setTimeout(() => fl.remove(), 800);
  }

  // íŒŒí‹°í´
  let cnt = 0;
  const iv = setInterval(() => {
    if (cnt++ >= data.count) { clearInterval(iv); return; }
    const el = document.createElement('span');
    el.className = 'fly-emoji';
    el.textContent = data.particles[Math.floor(Math.random() * data.particles.length)];
    el.style.left = (Math.random() * 95) + 'vw';
    el.style.bottom = '-50px';
    el.style.animationDuration = (1.2 + Math.random() * 1.8) + 's';
    cel.appendChild(el);
    el.addEventListener('animationend', () => el.remove());
  }, data.interval);
}

function hideCelebration() {
  const cel = document.getElementById('celebration');
  cel.classList.remove('show');
  cel.querySelectorAll('.fly-emoji').forEach(e => e.remove());
}

// â”€â”€ DONE â”€â”€
let isDoneState = false;
function doneKey() { return `${courseId}_${typeId}_${unitId}`; }

async function loadDoneState() {
  try {
    const r = await fetch('/api/done');
    const data = await r.json();
    isDoneState = data.done.includes(doneKey());
  } catch { isDoneState = false; }
  updateDoneBtn();
}

function updateDoneBtn() {
  const btn = document.getElementById('btn-done');
  if (!btn) return;
  btn.textContent = isDoneState ? 'âœ… ì™„ë£Œë¨' : 'ì´ ë‹¨ì› ì™„ë£Œ í‘œì‹œ';
  btn.classList.toggle('on', isDoneState);
}

async function toggleDone() {
  isDoneState = !isDoneState;
  try {
    await fetch('/api/done', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ key: doneKey(), done: isDoneState })
    });
  } catch { isDoneState = !isDoneState; }
  updateDoneBtn();
  showToast(isDoneState ? 'âœ… ì™„ë£Œ! ë©”ì¸ì—ì„œ ë‹¤ìŒ ë‹¨ì›ìœ¼ë¡œ ë„˜ì–´ê°€ì„¸ìš”' : 'ì™„ë£Œ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤');
}

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  window.scrollTo(0, 0);
}

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg; t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3000);
}
</script>
</body>
</html>
